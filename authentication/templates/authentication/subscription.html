{% extends "base.html" %}

{% block title %}Onglet d'abonnements{% endblock title %}

{% block content %}
    <section class="users_follows">
        <h2>Suivre d'autres utilisateurs</h2>
        <form method="POST">
            {% csrf_token %}
            <div class="users_follows__add">
                {{ form }}
                <input class="btn" type="submit" value="Envoyer">
            </div>
        </form>
    </section>

    <section class="subscription">
        <h2>Abonnements</h2>
        <ul>
            {% for sub in subscriptions %}
                {% if not forloop.first %}
                    <hr>
                {% endif %}
                <li>
                    {{ sub.followed_user }}
                    <a href="{% url 'unsubscribe' sub.id %}"><button class="btn subscription_btn" type='button'>Désabonner</button></a>
                </li>
            {% empty %}
                <p>Aucun abonnement</p>
            {% endfor %}
        </ul>
    </section>

    <section class="subscribers">
        <h2>Abonnés</h2>
        <ul>
            {% for user in subscribers %}
                {% if not forloop.first %}
                    <hr>
                {% endif %}
                <li>{{ user }}</li>
            {% empty %}
                <p>Aucun abonné</p>
            {% endfor %}
        </ul>
    </section>
{% endblock %}